/*! uppie v1.0.6 | (c) silverwind | BSD license */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():e.returnExports=n()}("undefined"!=typeof self?self:this,function(){"use strict";function e(e,r){if("input"===e.tagName.toLowerCase()&&"file"===e.type)e.addEventListener("change",function(e){var t=e.target;t.files&&t.files.length?i(t,r.bind(null,e)):"getFilesAndDirectories"in t?n(t,r.bind(null,e)):r(e)});else{var a=function(e){e.preventDefault()};e.addEventListener("dragover",a),e.addEventListener("dragenter",a),e.addEventListener("drop",function(e){e.preventDefault();var a=e.dataTransfer;a.items&&a.items.length&&"webkitGetAsEntry"in a.items[0]?t(a.items,r.bind(null,e)):"getFilesAndDirectories"in a?n(a,r.bind(null,e)):a.files?i(a,r.bind(null,e)):r()})}}function n(e,n){var i=new FormData,t=[],r=function(e,n,a){var o=[];e.forEach(function(e){o.push(new Promise(function(a){if("getFilesAndDirectories"in e)e.getFilesAndDirectories().then(function(n){r(n,e.path+"/",a)});else{if(e.name){var o=(n+e.name).replace(/^[/\\]/,"");i.append("files[]",e,o),t.push(o)}a()}}))}),Promise.all(o).then(a)};e.getFilesAndDirectories().then(function(e){new Promise(function(n){r(e,"/",n)}).then(n.bind(null,i,t))})}function i(e,n){var i=new FormData,t=[];[].slice.call(e.files).forEach(function(e){i.append("files[]",e,e.webkitRelativePath||e.name),t.push(e.webkitRelativePath||e.name)}),n(i,t)}function t(e,n){function i(e,n,t,r){var a=n||e.createReader();a.readEntries(function(n){var o=t?t.concat(n):n;n.length?setTimeout(i.bind(null,e,a,o,r),0):r(o)})}function t(e,n,o){n||(n=e.name),i(e,0,0,function(e){var i=[];e.forEach(function(e){i.push(new Promise(function(i){e.isFile?e.file(function(e){var t=n+"/"+e.name;r.append("files[]",e,t),a.push(t),i()},i.bind()):t(e,n+"/"+e.name,i)}))}),Promise.all(i).then(o.bind())})}var r=new FormData,a=[],o=[];[].slice.call(e).forEach(function(e){(e=e.webkitGetAsEntry())&&o.push(new Promise(function(n){e.isFile?e.file(function(e){r.append("files[]",e,e.name),a.push(e.name),n()},n.bind()):e.isDirectory&&t(e,null,n)}))}),Promise.all(o).then(n.bind(null,r,a))}return function(){return function(n,i){n instanceof NodeList?[].slice.call(n).forEach(function(n){e(n,i)}):e(n,i)}}});