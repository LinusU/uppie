/*! uppie v0.11.6 | (c) silverwind | BSD license */
!function(e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else{if("function"==typeof define&&define.amd)return define([],e);this.Uppie=e()}}(function(){"use strict";function e(e,n){var i=new FormData,t=[],a=function(e,n,r){var l=[];e.forEach(function(e){l.push(new Promise(function(r){if("getFilesAndDirectories"in e)e.getFilesAndDirectories().then(function(n){a(n,e.path+"/",r)});else{if(e.name){var l=(n+e.name).replace(/^[\/\\]/,"");i.append("file",e,l),t.push(l)}r()}}))}),Promise.all(l).then(r)};e.getFilesAndDirectories().then(function(e){new Promise(function(n){a(e,"/",n)}).then(n.bind(null,i,t))})}function n(e,n){var i=new FormData,t=[];[].slice.call(e.files).forEach(function(e){i.append("file",e,e.webkitRelativePath||e.name),t.push(e.webkitRelativePath||e.name)}),n(i,t)}function i(e,n){function i(e,n,t,a){var r=n||e.createReader();r.readEntries(function(n){var l=t?t.concat(n):n;n.length?setTimeout(i.bind(null,e,r,l,a),0):a(l)})}function t(e,n,l){n||(n=e.name),i(e,0,0,function(e){var i=[];e.forEach(function(e){i.push(new Promise(function(i){e.isFile?e.file(function(e){var t=n+"/"+e.name;a.append("file",e,t),r.push(t),i()},i.bind()):t(e,n+"/"+e.name,i)}))}),Promise.all(i).then(l.bind())})}var a=new FormData,r=[],l=[];[].slice.call(e).forEach(function(e){e=e.webkitGetAsEntry(),e&&l.push(new Promise(function(n){e.isFile?e.file(function(e){a.append("file",e,e.name),r.push(e.name),n()},n.bind()):e.isDirectory&&t(e,null,n)}))}),Promise.all(l).then(n.bind(null,a,r))}return function(){return function(t,a){if("input"===t.tagName.toLowerCase()&&"file"===t.type)t.addEventListener("change",function(i){var t=i.target;t.files&&t.files.length&&"webkitRelativePath"in t.files[0]?n(t,a.bind(null,i)):"getFilesAndDirectories"in t?e(t,a.bind(null,i)):a(i)});else{var r=function(e){e.preventDefault()};t.addEventListener("dragover",r),t.addEventListener("dragenter",r),t.addEventListener("drop",function(t){t.preventDefault();var r=t.dataTransfer;r.items&&r.items.length&&"webkitGetAsEntry"in r.items[0]?i(r.items,a.bind(null,t)):"getFilesAndDirectories"in r?e(r,a.bind(null,t)):r.files?n(r,a.bind(null,t)):a()})}}}});